<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio - MarketMinerAI</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <nav class="main-nav">
            <div class="logo">MarketMinerAI</div>
            <ul class="nav-links">
                <li><a href="index.html">Dashboard</a></li>
                <li><a href="portfolio.html" class="active">Portfolio</a></li>
                <li><a href="market.html">Market</a></li>
                <li><a href="orders.html">Orders</a></li>
                <li><a href="history.html">History</a></li>
            </ul>
            <div class="user-info">
                <span class="balance">$10,000.00</span>
                <button class="btn-deposit">Deposit</button>
                <button class="btn-withdraw">Withdraw</button>
            </div>
        </nav>
    </header>

    <main class="portfolio-container">
        <section class="portfolio-overview">
            <h1>Portfolio Overview</h1>
            <div class="portfolio-stats">
                <div class="stat-card">
                    <h3>Total Value</h3>
                    <p class="stat-value">$15,432.56</p>
                    <p class="stat-change positive">+2.34%</p>
                </div>
                <div class="stat-card">
                    <h3>24h Change</h3>
                    <p class="stat-value">$324.56</p>
                    <p class="stat-change positive">+1.45%</p>
                </div>
                <div class="stat-card">
                    <h3>All Time P/L</h3>
                    <p class="stat-value">$5,432.56</p>
                    <p class="stat-change positive">+54.32%</p>
                </div>
            </div>
        </section>

        <section class="portfolio-charts">
            <div class="chart-container">
                <canvas id="portfolioValueChart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="assetAllocationChart"></canvas>
            </div>
        </section>

        <section class="holdings-table">
            <h2>Current Holdings</h2>
            <table>
                <thead>
                    <tr>
                        <th>Asset</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Value</th>
                        <th>24h Change</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>BTC</td>
                        <td>0.5</td>
                        <td>$48,000.00</td>
                        <td>$24,000.00</td>
                        <td class="positive">+1.45%</td>
                        <td>
                            <button class="btn-trade">Trade</button>
                        </td>
                    </tr>
                    <tr>
                        <td>ETH</td>
                        <td>10</td>
                        <td>$3,200.00</td>
                        <td>$32,000.00</td>
                        <td class="negative">-0.78%</td>
                        <td>
                            <button class="btn-trade">Trade</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 MarketMinerAI. All rights reserved.</p>
    </footer>

    <script>
        // Portfolio Value Chart
        const portfolioValueCtx = document.getElementById('portfolioValueChart').getContext('2d');
        const portfolioValueChart = new Chart(portfolioValueCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Portfolio Value',
                    data: [],
                    borderColor: '#00ff88',
                    borderWidth: 2,
                    fill: true,
                    backgroundColor: 'rgba(0, 255, 136, 0.1)',
                    pointRadius: 0,
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    }
                },
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'day'
                        },
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        beginAtZero: false,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    }
                }
            }
        });

        // Asset Allocation Chart
        const assetAllocationCtx = document.getElementById('assetAllocationChart').getContext('2d');
        const assetAllocationChart = new Chart(assetAllocationCtx, {
            type: 'doughnut',
            data: {
                labels: [],
                datasets: [{
                    label: 'Allocation',
                    data: [],
                    backgroundColor: [
                        '#00ff88',
                        '#00b8ff',
                        '#ff4d4d',
                        '#ffc107',
                        '#9c27b0'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#ffffff',
                            font: {
                                size: 14
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.label}: ${context.raw}%`;
                            }
                        }
                    }
                }
            }
        });

        // Simulate real-time data updates
        function updateCharts() {
            // Update portfolio value chart
            const now = new Date();
            const value = 10000 + Math.random() * 5000;
            portfolioValueChart.data.labels.push(now);
            portfolioValueChart.data.datasets[0].data.push(value);
            
            if (portfolioValueChart.data.labels.length > 30) {
                portfolioValueChart.data.labels.shift();
                portfolioValueChart.data.datasets[0].data.shift();
            }
            portfolioValueChart.update();

            // Update asset allocation
            const allocations = [
                Math.random() * 50 + 30, // BTC
                Math.random() * 40 + 20, // ETH
                Math.random() * 20 + 5,  // USDT
                Math.random() * 10 + 5,  // Other
            ];
            assetAllocationChart.data.labels = ['BTC', 'ETH', 'USDT', 'Other'];
            assetAllocationChart.data.datasets[0].data = allocations;
            assetAllocationChart.update();

            // Update stats
            document.querySelector('.stat-value').textContent = `$${value.toFixed(2)}`;
            document.querySelector('.stat-change').textContent = `${(Math.random() * 5).toFixed(2)}%`;
            document.querySelector('.stat-change').className = 
                Math.random() > 0.5 ? 'stat-change positive' : 'stat-change negative';
        }

        // Initial data load
        updateCharts();
        setInterval(updateCharts, 5000);

        // Add event listeners to trade buttons
        document.querySelectorAll('.btn-trade').forEach(button => {
            button.addEventListener('click', () => {
                const asset = button.closest('tr').querySelector('td').textContent;
                window.location.href = `market.html?asset=${asset}`;
            });
        });
    </script>
</body>
</html>
